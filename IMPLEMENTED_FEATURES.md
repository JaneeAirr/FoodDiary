# –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –†–∞—Å—á–µ—Ç BMR –∏ –¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Ä–º—ã –∫–∞–ª–æ—Ä–∏–π
- **–§–∞–π–ª**: `backend/api/utils.py`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `calculate_bmr()` - —Ä–∞—Å—á–µ—Ç –±–∞–∑–æ–≤–æ–≥–æ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞ –ø–æ —Ñ–æ—Ä–º—É–ª–µ –•–∞—Ä—Ä–∏—Å–∞-–ë–µ–Ω–µ–¥–∏–∫—Ç–∞
  - `calculate_tdee()` - —Ä–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ —ç–Ω–µ—Ä–≥–∏–∏
  - `calculate_daily_calories()` - —Ä–∞—Å—á–µ—Ç –¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Ä–º—ã –∫–∞–ª–æ—Ä–∏–π —Å —É—á–µ—Ç–æ–º —Ü–µ–ª–∏
  - `calculate_macros()` - —Ä–∞—Å—á–µ—Ç –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ (–±–µ–ª–∫–∏, –∂–∏—Ä—ã, —É–≥–ª–µ–≤–æ–¥—ã)
- **Endpoint**: `GET/POST /api/calculate-nutrition/` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ü–µ–ª–µ–π –ø–∏—Ç–∞–Ω–∏—è
- **–§–∞–π–ª**: `backend/users/views.py`
- **–§—É–Ω–∫—Ü–∏—è**: –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ü–µ–ª–∏ –ø–∏—Ç–∞–Ω–∏—è
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –≤–µ—Å, —Ä–æ—Å—Ç, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –ø–æ–ª, —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Ü–µ–ª—å

### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π –ò–ò-–∞–Ω–∞–ª–∏–∑ –ø–∏—â–µ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- **–§–∞–π–ª**: `backend/ai/services.py`
- **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç**:
  - –ü—Ä–æ–ø—É—Å–∫ –∑–∞–≤—Ç—Ä–∞–∫–∞ (–ø—Ä–æ—Ü–µ–Ω—Ç –¥–Ω–µ–π –±–µ–∑ –∑–∞–≤—Ç—Ä–∞–∫–∞)
  - –ü–æ–∑–¥–Ω–∏–µ —É–∂–∏–Ω—ã
  - –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–π
  - –ù–µ—Ö–≤–∞—Ç–∫–∞ –±–µ–ª–∫–∞
- **–í—ã–¥–∞–µ—Ç**:
  - –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–≤–µ–¥–µ–Ω–∏—è
  - –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã
  - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  - –û–±—â–µ–µ —Ä–µ–∑—é–º–µ

### 4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–µ—Å–∞
- **–ú–æ–¥–µ–ª—å**: `WeightEntry` –≤ `backend/api/models.py`
- **Endpoints**:
  - `GET /api/weight/` - —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –≤–µ—Å–∞
  - `POST /api/weight/` - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
  - `GET /api/weight/{id}/` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å
  - `PUT/PATCH /api/weight/{id}/` - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
  - `DELETE /api/weight/{id}/` - —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
- **–§–∏–ª—å—Ç—Ä—ã**: `start_date`, `end_date`

### 5. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–ú–æ–¥–µ–ª—å**: `Notification` –≤ `backend/api/models.py`
- **–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:
  - `reminder` - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
  - `warning` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
  - `info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  - `achievement` - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- **Endpoints**:
  - `GET /api/notifications/` - —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  - `POST /api/notifications/` - —Å–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  - `POST /api/notifications/{id}/mark_read/` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
  - `POST /api/notifications/mark_all_read/` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
  - `GET /api/notifications/unread_count/` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
  - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–µ–º –ø–∏—â–∏ (–µ—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞ –¥–µ–Ω—å)
  - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∫–∞–ª–æ—Ä–∏–π
  - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ—Ö–≤–∞—Ç–∫–µ –±–µ–ª–∫–∞
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ —Ü–µ–ª–∏

### 6. –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **Endpoint**: `GET /api/statistics/`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–∏—Ç–∞–Ω–∏—è –ø–æ –¥–Ω—è–º (–∫–∞–ª–æ—Ä–∏–∏, –ë–ñ–£)
  - –î–∞–Ω–Ω—ã–µ –æ –≤–µ—Å–µ –ø–æ –¥–Ω—è–º
  - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `days` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)

## üìã API Endpoints

### –†–∞—Å—á–µ—Ç—ã –ø–∏—Ç–∞–Ω–∏—è
- `GET/POST /api/calculate-nutrition/` - —Ä–∞—Å—á–µ—Ç BMR, TDEE, –∫–∞–ª–æ—Ä–∏–π –∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤

### –í–µ—Å
- `GET /api/weight/` - —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –≤–µ—Å–∞
- `POST /api/weight/` - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤–µ—Å–∞
- `GET /api/weight/{id}/` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å
- `PUT/PATCH /api/weight/{id}/` - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
- `DELETE /api/weight/{id}/` - —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `GET /api/notifications/` - —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Ñ–∏–ª—å—Ç—Ä: `is_read=true/false`)
- `POST /api/notifications/` - —Å–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `POST /api/notifications/{id}/mark_read/` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
- `POST /api/notifications/mark_all_read/` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
- `GET /api/notifications/unread_count/` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- `POST /api/check-notifications/` - –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/statistics/?days=7` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è –∏ –≤–µ—Å–∞

## üîß –ú–∏–≥—Ä–∞—Ü–∏–∏

–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd backend
python manage.py makemigrations api
python manage.py migrate
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–∞—Å—á–µ—Ç –ø–∏—Ç–∞–Ω–∏—è
```python
# GET /api/calculate-nutrition/ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
# POST /api/calculate-nutrition/
{
    "weight": 70,
    "height": 175,
    "age": 25,
    "gender": "M",
    "activity_level": "moderate",
    "goal": "weight_loss"
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤–µ—Å–∞
```python
POST /api/weight/
{
    "weight": 72.5,
    "date": "2024-01-15",
    "notes": "–£—Ç—Ä–æ, –ø–æ—Å–ª–µ –∑–∞–≤—Ç—Ä–∞–∫–∞"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```python
GET /api/statistics/?days=30
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
{
    "nutrition": [
        {
            "date": "2024-01-15",
            "total_calories": 2000,
            "total_protein": 150,
            "total_carbs": 200,
            "total_fat": 65
        }
    ],
    "weight": [
        {
            "date": "2024-01-15",
            "weight": 72.5,
            "notes": ""
        }
    ],
    "date_range": {
        "start": "2024-01-01",
        "end": "2024-01-30",
        "days": 30
    }
}
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–í—Å–µ —Ñ–æ—Ä–º—É–ª—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** - BMR, TDEE, —Ä–∞—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π –∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ü–µ–ª–µ–π** - –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ü–µ–ª–∏
3. **–î–µ—Ç–∞–ª—å–Ω—ã–π –ò–ò-–∞–Ω–∞–ª–∏–∑** - –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–∏—Ç–∞–Ω–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
4. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–µ—Å–∞** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É –≤–µ—Å–∞
5. **–£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
